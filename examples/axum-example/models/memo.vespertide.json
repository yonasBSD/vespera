{
  "$schema": "https://raw.githubusercontent.com/dev-five-git/vespertide/refs/heads/main/schemas/model.schema.json",
  "name": "memo",
  "columns": [
    { "name": "id", "type": "integer", "nullable": false, "primary_key": { "auto_increment": true } },
    { 
      "name": "user_id", 
      "type": "integer", 
      "nullable": false, 
      "foreign_key": { "ref_table": "user", "ref_columns": ["id"], "on_delete": "cascade" },
      "index": true
    },
    { "name": "title", "type": { "kind": "varchar", "length": 200 }, "nullable": false },
    { "name": "content", "type": "text", "nullable": false },
    { 
      "name": "status", 
      "type": { "kind": "enum", "name": "memo_status", "values": ["draft", "published", "archived"] }, 
      "nullable": false, 
      "default": "'draft'" 
    },
    { "name": "created_at", "type": "timestamptz", "nullable": false, "default": "NOW()" },
    { "name": "updated_at", "type": "timestamptz", "nullable": false, "default": "NOW()" }
  ]
}
